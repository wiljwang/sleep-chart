{"version":3,"sources":["components/Header.js","utils/toHrMin.js","context/AppReducer.js","context/GlobalState.js","components/AsleepAverage.js","components/SleepAnalysis.js","utils/toDay.js","components/AddData.js","components/Datum.js","components/AllRecordedData.js","App.js","index.js"],"names":["Header","props","milliseconds","parseInt","hours","Math","floor","state","action","type","loading","data","payload","filter","datum","_id","error","initialState","GlobalContext","createContext","GlobalProvider","children","useReducer","AppReducer","dispatch","getData","a","axios","get","res","response","deleteDatum","id","delete","addDatum","config","headers","post","Provider","value","AsleepAverage","useContext","map","Date","parse","ends","starts","total","reduce","acc","item","average","toHrMin","length","toFixed","SleepAnalysis","week","slice","element","startDate","endDate","day","toDay","getDay","setMonth","setDate","console","log","valueOf","x","y","getTime","reverse","className","series","width","height","options","plotOptions","bar","horizontal","xaxis","labels","datetimeUTC","format","AddData","useState","setStarts","setEnds","onSubmit","e","preventDefault","htmlFor","onChange","target","Datum","parts","Intl","DateTimeFormat","month","hour","minute","formatRange","onClick","AllRecordedData","useEffect","key","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sNAEaA,EAAS,WACpB,OAAO,4CCHM,WAACC,GACd,IAAIC,EAAeC,SAASF,EAAO,IAC/BG,EAAQC,KAAKC,MAAMJ,EAAe,MAEtC,OAAOE,EAAQ,MADDC,KAAKC,OAAOJ,EAAuB,KAARE,GAAmB,KAC3B,O,6CCJpB,WAACG,EAAOC,GACrB,OAAQA,EAAOC,MACb,IAAK,WACH,OAAO,eACFF,EADL,CAEEG,SAAS,EACTC,KAAMH,EAAOI,UAEjB,IAAK,eACH,OAAO,eACFL,EADL,CAEEI,KAAMJ,EAAMI,KAAKE,QAAO,SAACC,GAAD,OAAWA,EAAMC,MAAQP,EAAOI,aAE5D,IAAK,YACH,OAAO,eACFL,EADL,CAEEI,KAAK,GAAD,mBAAMJ,EAAMI,MAAZ,CAAkBH,EAAOI,YAEjC,IAAK,aACH,OAAO,eACFL,EADL,CAEES,MAAOR,EAAOI,UAElB,QACE,OAAOL,I,gBCnBPU,EAAe,CACnBN,KAAM,GACNK,MAAO,KACPN,SAAS,GAIEQ,EAAgBC,wBAAcF,GAG9BG,EAAiB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAAe,EACpBC,qBAAWC,EAAYN,GADH,mBACvCV,EADuC,KAChCiB,EADgC,KAIxCC,EAAO,uCAAG,4BAAAC,EAAA,+EAEMC,IAAMC,IAAI,gBAFhB,OAENC,EAFM,OAGZL,EAAS,CACPf,KAAM,WACNG,QAASiB,EAAIlB,KAAKA,OALR,gDAQZa,EAAS,CACPf,KAAM,aACNG,QAAS,KAAMkB,SAASnB,KAAKK,QAVnB,yDAAH,qDAePe,EAAW,uCAAG,WAAOC,GAAP,SAAAN,EAAA,+EAEVC,IAAMM,OAAN,uBAA6BD,IAFnB,OAGhBR,EAAS,CACPf,KAAM,eACNG,QAASoB,IALK,+CAQhBR,EAAS,CACPf,KAAM,aACNG,QAAS,KAAMkB,SAASnB,KAAKK,QAVf,wDAAH,sDAeXkB,EAAQ,uCAAG,WAAOpB,GAAP,iBAAAY,EAAA,6DACTS,EAAS,CACbC,QAAS,CACP,eAAgB,qBAHL,kBAOKT,IAAMU,KAAK,eAAgBvB,EAAOqB,GAPvC,OAOPN,EAPO,OAQbL,EAAS,CACPf,KAAM,YACNG,QAASiB,EAAIlB,KAAKA,OAVP,gDAaba,EAAS,CACPf,KAAM,aACNG,QAAS,KAAMkB,SAASnB,KAAKK,QAflB,yDAAH,sDAoBd,OACE,kBAACE,EAAcoB,SAAf,CACEC,MAAO,CACL5B,KAAMJ,EAAMI,KACZK,MAAOT,EAAMS,MACbN,QAASH,EAAMG,QACfe,UACAM,cACAG,aAGDb,IC3EMmB,EAAgB,WAAO,IAG5BtC,EAFWuC,qBAAWvB,GAApBP,KAEkB+B,KACxB,SAAC5B,GAAD,OAAW6B,KAAKC,MAAM9B,EAAM+B,MAAQF,KAAKC,MAAM9B,EAAMgC,WAEjDC,EAAQ7C,EAAa8C,QAAO,SAACC,EAAKC,GAAN,OAAgBD,EAAOC,IAAO,GAC1DC,EACM,IAAVJ,EACI,WACAK,GAASL,EAAQ7C,EAAamD,QAAQC,QAAQ,IAEpD,OACE,oCACE,8CACA,4BAAKH,K,iBCdEI,EAAgB,WAAO,IAE9BC,EADaf,qBAAWvB,GAApBP,KACQ8C,MAAM,EAAG,GAmBzB,OAlBAD,EAAOA,EAAKd,KAAI,SAACgB,GACf,IAAIC,EAAY,IAAIhB,KAAKe,EAAQZ,QAC7Bc,EAAU,IAAIjB,KAAKe,EAAQb,MACzBgB,ECZK,SAAC5D,GACd,OAAQA,GACN,KAAK,EACH,MAAO,MACT,KAAK,EACH,MAAO,MACT,KAAK,EACH,MAAO,MACT,KAAK,EACH,MAAO,MACT,KAAK,EACH,MAAO,MACT,KAAK,EACH,MAAO,MACT,KAAK,EACH,MAAO,MACT,QACE,MAAO,IDLG6D,CAAMF,EAAQG,UAO1B,OANAJ,EAAUK,SAAS,GACnBJ,EAAQI,SAAS,GACjBL,EAAUM,QAAQ,GAClBL,EAAQK,QAAQ,GAChBC,QAAQC,IAAIR,EAAUS,WACtBF,QAAQC,IAAIP,EAAQQ,WACb,CACLC,EAAGR,EACHS,EAAG,CAACX,EAAUY,UAAWX,EAAQW,gBAGhCC,UACLN,QAAQC,IAAIX,GAGV,oCACE,8CACA,yBAAKiB,UAAU,mBACZjB,EAAKH,OAAS,EACb,kBAAC,IAAD,CACE5C,KAAK,WACLiE,OAAQ,CACN,CACE/D,KAAM6C,IAGVmB,MAAM,QACNC,OAAO,OACPC,QAAS,CACPC,YAAa,CACXC,IAAK,CACHC,YAAY,IAGhBC,MAAO,CACLxE,KAAM,WACNyE,OAAQ,CACNC,aAAa,EACbC,OAAQ,SAMhB,sBErDGC,EAAU,WAAO,IAAD,EACCC,mBAAS,GADV,mBACpBxC,EADoB,KACZyC,EADY,OAEHD,mBAAS,GAFN,mBAEpBzC,EAFoB,KAEd2C,EAFc,KAInBtD,EAAaO,qBAAWvB,GAAxBgB,SAcR,OACE,oCACE,wCACA,0BAAMuD,SAfO,SAACC,IAChBA,EAAEC,iBACE7C,EAASD,IAMXX,EALiB,CACfY,SACAD,WAWA,yBAAK4B,UAAU,gBACb,2BAAOmB,QAAQ,kBAAf,UACA,2BACEnF,KAAK,iBACL8B,MAAOO,EACP+C,SAAU,SAACH,GAAD,OAAOH,EAAUG,EAAEI,OAAOvD,WAGxC,yBAAKkC,UAAU,gBACb,2BAAOmB,QAAQ,kBAAf,QACA,2BACEnF,KAAK,iBACL8B,MAAOM,EACPgD,SAAU,SAACH,GAAD,OAAOF,EAAQE,EAAEI,OAAOvD,WAGtC,4BAAQkC,UAAU,OAAlB,UCrCKsB,EAAQ,SAAC,GAAe,IAAbjF,EAAY,EAAZA,MACdiB,EAAgBU,qBAAWvB,GAA3Ba,YAEF4B,EAAYhB,KAAKC,MAAM9B,EAAMgC,QAC7Bc,EAAUjB,KAAKC,MAAM9B,EAAM+B,MAS3BmD,EAPiB,IAAIC,KAAKC,eAAe,KAAM,CACnDC,MAAO,QACPtC,IAAK,UACLuC,KAAM,UACNC,OAAQ,YAGmBC,YAAY3C,EAAWC,GAEpD,OACE,4BACGoC,EACD,8BAAO5C,EAAQQ,EAAUD,IACzB,4BAAQ4C,QAAS,kBAAMxE,EAAYjB,EAAMC,MAAM0D,UAAU,cAAzD,OCnBO+B,EAAkB,WAAO,IAAD,EACT/D,qBAAWvB,GAA7BP,EAD2B,EAC3BA,KAAMc,EADqB,EACrBA,QAOd,OALAgF,qBAAU,WACRhF,MAEC,IAGD,oCACE,iDACA,wBAAIgD,UAAU,QACX9D,EAAK+B,KAAI,SAAC5B,GAAD,OACR,kBAAC,EAAD,CAAO4F,IAAK5F,EAAMC,IAAKD,MAAOA,UCOzB6F,G,MAdH,WACV,OACE,kBAAC,EAAD,KACE,kBAAC,EAAD,MACA,yBAAKlC,UAAU,aACb,kBAAC,EAAD,MACA,kBAAC,EAAD,MACA,kBAAC,EAAD,MACA,kBAAC,EAAD,UCfRmC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.2151a9e9.chunk.js","sourcesContent":["import React from \"react\";\n\nexport const Header = () => {\n  return <h2>Sleep Chart</h2>;\n};\n","export default (props) => {\n  var milliseconds = parseInt(props, 10);\n  var hours = Math.floor(milliseconds / 3600000);\n  var minutes = Math.floor((milliseconds - hours * 3600000) / 60000);\n  return hours + \"hr \" + minutes + \"min\";\n};\n","export default (state, action) => {\n  switch (action.type) {\n    case \"GET_DATA\":\n      return {\n        ...state,\n        loading: false,\n        data: action.payload,\n      };\n    case \"DELETE_DATUM\":\n      return {\n        ...state,\n        data: state.data.filter((datum) => datum._id !== action.payload),\n      };\n    case \"ADD_DATUM\":\n      return {\n        ...state,\n        data: [...state.data, action.payload],\n      };\n    case \"DATA_ERROR\":\n      return {\n        ...state,\n        error: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n","import React, { createContext, useReducer } from \"react\";\nimport AppReducer from \"./AppReducer\";\nimport axios from \"axios\";\n\n// initial state\nconst initialState = {\n  data: [],\n  error: null,\n  loading: true,\n};\n\n// create context\nexport const GlobalContext = createContext(initialState);\n\n// provider component\nexport const GlobalProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(AppReducer, initialState);\n\n  // actions\n  const getData = async () => {\n    try {\n      const res = await axios.get(\"/api/v1/data\");\n      dispatch({\n        type: \"GET_DATA\",\n        payload: res.data.data,\n      });\n    } catch (error) {\n      dispatch({\n        type: \"DATA_ERROR\",\n        payload: error.response.data.error,\n      });\n    }\n  };\n\n  const deleteDatum = async (id) => {\n    try {\n      await axios.delete(`/api/v1/data/${id}`);\n      dispatch({\n        type: \"DELETE_DATUM\",\n        payload: id,\n      });\n    } catch (error) {\n      dispatch({\n        type: \"DATA_ERROR\",\n        payload: error.response.data.error,\n      });\n    }\n  };\n\n  const addDatum = async (datum) => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    try {\n      const res = await axios.post(\"/api/v1/data\", datum, config);\n      dispatch({\n        type: \"ADD_DATUM\",\n        payload: res.data.data,\n      });\n    } catch (error) {\n      dispatch({\n        type: \"DATA_ERROR\",\n        payload: error.response.data.error,\n      });\n    }\n  };\n\n  return (\n    <GlobalContext.Provider\n      value={{\n        data: state.data,\n        error: state.error,\n        loading: state.loading,\n        getData,\n        deleteDatum,\n        addDatum,\n      }}\n    >\n      {children}\n    </GlobalContext.Provider>\n  );\n};\n","import React, { useContext } from \"react\";\nimport toHrMin from \"../utils/toHrMin\";\n\nimport { GlobalContext } from \"../context/GlobalState\";\n\nexport const AsleepAverage = () => {\n  const { data } = useContext(GlobalContext);\n\n  const milliseconds = data.map(\n    (datum) => Date.parse(datum.ends) - Date.parse(datum.starts)\n  );\n  const total = milliseconds.reduce((acc, item) => (acc += item), 0);\n  const average =\n    total === 0\n      ? \"0hr 0min\"\n      : toHrMin((total / milliseconds.length).toFixed(0));\n\n  return (\n    <>\n      <h4>Asleep Average</h4>\n      <h1>{average}</h1>\n    </>\n  );\n};\n","import React, { useContext } from \"react\";\nimport toDay from \"../utils/toDay\";\nimport Chart from \"react-apexcharts\";\n\nimport { GlobalContext } from \"../context/GlobalState\";\n\nexport const SleepAnalysis = () => {\n  const { data } = useContext(GlobalContext);\n  let week = data.slice(0, 7);\n  week = week.map((element) => {\n    let startDate = new Date(element.starts);\n    let endDate = new Date(element.ends);\n    const day = toDay(endDate.getDay());\n    startDate.setMonth(0);\n    endDate.setMonth(0);\n    startDate.setDate(1);\n    endDate.setDate(1);\n    console.log(startDate.valueOf());\n    console.log(endDate.valueOf());\n    return {\n      x: day,\n      y: [startDate.getTime(), endDate.getTime()],\n    };\n  });\n  week.reverse();\n  console.log(week);\n\n  return (\n    <>\n      <h3>Sleep Analysis</h3>\n      <div className=\"chart-container\">\n        {week.length > 0 ? (\n          <Chart\n            type=\"rangeBar\"\n            series={[\n              {\n                data: week,\n              },\n            ]}\n            width=\"350px\"\n            height=\"100%\"\n            options={{\n              plotOptions: {\n                bar: {\n                  horizontal: true,\n                },\n              },\n              xaxis: {\n                type: \"datetime\",\n                labels: {\n                  datetimeUTC: false,\n                  format: \"h\",\n                },\n              },\n            }}\n          />\n        ) : (\n          \"No recorded data\"\n        )}\n      </div>\n    </>\n  );\n};\n","export default (props) => {\n  switch (props) {\n    case 0:\n      return \"Sun\";\n    case 1:\n      return \"Mon\";\n    case 2:\n      return \"Tue\";\n    case 3:\n      return \"Wed\";\n    case 4:\n      return \"Thu\";\n    case 5:\n      return \"Fri\";\n    case 6:\n      return \"Sat\";\n    default:\n      return \"\";\n  }\n};\n","import React, { useContext, useState } from \"react\";\n\nimport { GlobalContext } from \"../context/GlobalState\";\n\nexport const AddData = () => {\n  const [starts, setStarts] = useState(0);\n  const [ends, setEnds] = useState(0);\n\n  const { addDatum } = useContext(GlobalContext);\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    if (starts < ends) {\n      const newDatum = {\n        starts,\n        ends,\n      };\n\n      addDatum(newDatum);\n    }\n  };\n\n  return (\n    <>\n      <h3>Add Data</h3>\n      <form onSubmit={onSubmit}>\n        <div className=\"form-control\">\n          <label htmlFor=\"datetime-local\">Starts</label>\n          <input\n            type=\"datetime-local\"\n            value={starts}\n            onChange={(e) => setStarts(e.target.value)}\n          />\n        </div>\n        <div className=\"form-control\">\n          <label htmlFor=\"datetime-local\">Ends</label>\n          <input\n            type=\"datetime-local\"\n            value={ends}\n            onChange={(e) => setEnds(e.target.value)}\n          />\n        </div>\n        <button className=\"btn\">Add</button>\n      </form>\n    </>\n  );\n};\n","import React, { useContext } from \"react\";\nimport toHrMin from \"../utils/toHrMin\";\n\nimport { GlobalContext } from \"../context/GlobalState\";\n\nexport const Datum = ({ datum }) => {\n  const { deleteDatum } = useContext(GlobalContext);\n\n  const startDate = Date.parse(datum.starts);\n  const endDate = Date.parse(datum.ends);\n\n  const dateTimeFormat = new Intl.DateTimeFormat(\"en\", {\n    month: \"short\",\n    day: \"numeric\",\n    hour: \"numeric\",\n    minute: \"numeric\",\n  });\n\n  const parts = dateTimeFormat.formatRange(startDate, endDate);\n\n  return (\n    <li>\n      {parts}\n      <span>{toHrMin(endDate - startDate)}</span>\n      <button onClick={() => deleteDatum(datum._id)} className=\"delete-btn\">\n        x\n      </button>\n    </li>\n  );\n};\n","import React, { useContext, useEffect } from \"react\";\nimport { Datum } from \"./Datum\";\n\nimport { GlobalContext } from \"../context/GlobalState\";\n\nexport const AllRecordedData = () => {\n  const { data, getData } = useContext(GlobalContext);\n\n  useEffect(() => {\n    getData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <>\n      <h3>All Recorded Data</h3>\n      <ul className=\"list\">\n        {data.map((datum) => (\n          <Datum key={datum._id} datum={datum} />\n        ))}\n      </ul>\n    </>\n  );\n};\n","import React from \"react\";\nimport { Header } from \"./components/Header\";\nimport { AsleepAverage } from \"./components/AsleepAverage\";\nimport { SleepAnalysis } from \"./components/SleepAnalysis\";\nimport { AddData } from \"./components/AddData\";\nimport { AllRecordedData } from \"./components/AllRecordedData\";\n\nimport { GlobalProvider } from \"./context/GlobalState\";\n\nimport \"./App.css\";\n\nconst App = () => {\n  return (\n    <GlobalProvider>\n      <Header />\n      <div className=\"container\">\n        <AsleepAverage />\n        <SleepAnalysis />\n        <AddData />\n        <AllRecordedData />\n      </div>\n    </GlobalProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}